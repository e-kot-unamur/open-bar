var app=function(){"use strict";function t(){}const e=t=>t;function n(t){return t()}function r(){return Object.create(null)}function o(t){t.forEach(n)}function s(t){return"function"==typeof t}function c(t,e){return t!=t?e==e:t!==e||t&&"object"==typeof t||"function"==typeof t}function l(e,n,r){e.$$.on_destroy.push(function(e,...n){if(null==e)return t;const r=e.subscribe(...n);return r.unsubscribe?()=>r.unsubscribe():r}(n,r))}function i(t,e,n,r){if(t){const o=u(t,e,n,r);return t[0](o)}}function u(t,e,n,r){return t[1]&&r?function(t,e){for(const n in e)t[n]=e[n];return t}(n.ctx.slice(),t[1](r(e))):n.ctx}function a(t,e,n,r,o,s,c){const l=function(t,e,n,r){if(t[2]&&r){const o=t[2](r(n));if(void 0===e.dirty)return o;if("object"==typeof o){const t=[],n=Math.max(e.dirty.length,o.length);for(let r=0;r<n;r+=1)t[r]=e.dirty[r]|o[r];return t}return e.dirty|o}return e.dirty}(e,r,o,s);if(l){const o=u(e,n,r,c);t.p(o,l)}}const f="undefined"!=typeof window;let d=f?()=>window.performance.now():()=>Date.now(),$=f?t=>requestAnimationFrame(t):t;const p=new Set;function m(t){p.forEach((e=>{e.c(t)||(p.delete(e),e.f())})),0!==p.size&&$(m)}function g(t,e){t.appendChild(e)}function h(t,e,n){t.insertBefore(e,n||null)}function y(t){t.parentNode.removeChild(t)}function v(t,e){for(let n=0;n<t.length;n+=1)t[n]&&t[n].d(e)}function b(t){return document.createElement(t)}function w(t){return document.createTextNode(t)}function x(){return w(" ")}function _(){return w("")}function k(t,e,n,r){return t.addEventListener(e,n,r),()=>t.removeEventListener(e,n,r)}function E(t,e,n){null==n?t.removeAttribute(e):t.getAttribute(e)!==n&&t.setAttribute(e,n)}function C(t,e){e=""+e,t.wholeText!==e&&(t.data=e)}function S(t,e){t.value=null==e?"":e}function D(t,e){const n=document.createEvent("CustomEvent");return n.initCustomEvent(t,!1,!1,e),n}const O=new Set;let j,q=0;function P(t,e){const n=(t.style.animation||"").split(", "),r=n.filter(e?t=>t.indexOf(e)<0:t=>-1===t.indexOf("__svelte")),o=n.length-r.length;o&&(t.style.animation=r.join(", "),q-=o,q||$((()=>{q||(O.forEach((t=>{const e=t.__svelte_stylesheet;let n=e.cssRules.length;for(;n--;)e.deleteRule(n);t.__svelte_rules={}})),O.clear())})))}function I(t){j=t}function N(){const t=function(){if(!j)throw new Error("Function called outside component initialization");return j}();return(e,n)=>{const r=t.$$.callbacks[e];if(r){const o=D(e,n);r.slice().forEach((e=>{e.call(t,o)}))}}}function F(t,e){const n=t.$$.callbacks[e.type];n&&n.slice().forEach((t=>t(e)))}const z=[],B=[],L=[],A=[],R=Promise.resolve();let H=!1;function T(){H||(H=!0,R.then(G))}function M(){return T(),R}function J(t){L.push(t)}let U=!1;const W=new Set;function G(){if(!U){U=!0;do{for(let t=0;t<z.length;t+=1){const e=z[t];I(e),K(e.$$)}for(I(null),z.length=0;B.length;)B.pop()();for(let t=0;t<L.length;t+=1){const e=L[t];W.has(e)||(W.add(e),e())}L.length=0}while(z.length);for(;A.length;)A.pop()();H=!1,U=!1,W.clear()}}function K(t){if(null!==t.fragment){t.update(),o(t.before_update);const e=t.dirty;t.dirty=[-1],t.fragment&&t.fragment.p(t.ctx,e),t.after_update.forEach(J)}}let Q;function V(t,e,n){t.dispatchEvent(D(`${e?"intro":"outro"}${n}`))}const X=new Set;let Y;function Z(){Y={r:0,c:[],p:Y}}function tt(){Y.r||o(Y.c),Y=Y.p}function et(t,e){t&&t.i&&(X.delete(t),t.i(e))}function nt(t,e,n,r){if(t&&t.o){if(X.has(t))return;X.add(t),Y.c.push((()=>{X.delete(t),r&&(n&&t.d(1),r())})),t.o(e)}}const rt={duration:0};function ot(n,r,o){let c,l,i=r(n,o),u=!1,a=0;function f(){c&&P(n,c)}function g(){const{delay:r=0,duration:o=300,easing:s=e,tick:g=t,css:h}=i||rt;h&&(c=function(t,e,n,r,o,s,c,l=0){const i=16.666/r;let u="{\n";for(let t=0;t<=1;t+=i){const r=e+(n-e)*s(t);u+=100*t+`%{${c(r,1-r)}}\n`}const a=u+`100% {${c(n,1-n)}}\n}`,f=`__svelte_${function(t){let e=5381,n=t.length;for(;n--;)e=(e<<5)-e^t.charCodeAt(n);return e>>>0}(a)}_${l}`,d=t.ownerDocument;O.add(d);const $=d.__svelte_stylesheet||(d.__svelte_stylesheet=d.head.appendChild(b("style")).sheet),p=d.__svelte_rules||(d.__svelte_rules={});p[f]||(p[f]=!0,$.insertRule(`@keyframes ${f} ${a}`,$.cssRules.length));const m=t.style.animation||"";return t.style.animation=`${m?`${m}, `:""}${f} ${r}ms linear ${o}ms 1 both`,q+=1,f}(n,0,1,o,r,s,h,a++)),g(0,1);const y=d()+r,v=y+o;l&&l.abort(),u=!0,J((()=>V(n,!0,"start"))),l=function(t){let e;return 0===p.size&&$(m),{promise:new Promise((n=>{p.add(e={c:t,f:n})})),abort(){p.delete(e)}}}((t=>{if(u){if(t>=v)return g(1,0),V(n,!0,"end"),f(),u=!1;if(t>=y){const e=s((t-y)/o);g(e,1-e)}}return u}))}let h=!1;return{start(){h||(P(n),s(i)?(i=i(),(Q||(Q=Promise.resolve(),Q.then((()=>{Q=null}))),Q).then(g)):g())},invalidate(){h=!1},end(){u&&(f(),u=!1)}}}function st(t){t&&t.c()}function ct(t,e,r){const{fragment:c,on_mount:l,on_destroy:i,after_update:u}=t.$$;c&&c.m(e,r),J((()=>{const e=l.map(n).filter(s);i?i.push(...e):o(e),t.$$.on_mount=[]})),u.forEach(J)}function lt(t,e){const n=t.$$;null!==n.fragment&&(o(n.on_destroy),n.fragment&&n.fragment.d(e),n.on_destroy=n.fragment=null,n.ctx=[])}function it(e,n,s,c,l,i,u=[-1]){const a=j;I(e);const f=n.props||{},d=e.$$={fragment:null,ctx:null,props:i,update:t,not_equal:l,bound:r(),on_mount:[],on_destroy:[],before_update:[],after_update:[],context:new Map(a?a.$$.context:[]),callbacks:r(),dirty:u,skip_bound:!1};let $=!1;if(d.ctx=s?s(e,f,((t,n,...r)=>{const o=r.length?r[0]:n;return d.ctx&&l(d.ctx[t],d.ctx[t]=o)&&(!d.skip_bound&&d.bound[t]&&d.bound[t](o),$&&function(t,e){-1===t.$$.dirty[0]&&(z.push(t),T(),t.$$.dirty.fill(0)),t.$$.dirty[e/31|0]|=1<<e%31}(e,t)),n})):[],d.update(),$=!0,o(d.before_update),d.fragment=!!c&&c(d.ctx),n.target){if(n.hydrate){const t=function(t){return Array.from(t.childNodes)}(n.target);d.fragment&&d.fragment.l(t),t.forEach(y)}else d.fragment&&d.fragment.c();n.intro&&et(e.$$.fragment),ct(e,n.target,n.anchor),G()}I(a)}class ut{$destroy(){lt(this,1),this.$destroy=t}$on(t,e){const n=this.$$.callbacks[t]||(this.$$.callbacks[t]=[]);return n.push(e),()=>{const t=n.indexOf(e);-1!==t&&n.splice(t,1)}}$set(t){var e;this.$$set&&(e=t,0!==Object.keys(e).length)&&(this.$$.skip_bound=!0,this.$$set(t),this.$$.skip_bound=!1)}}function at(t,e,n){const r=t.slice();return r[3]=e[n][0],r[4]=e[n][1],r}function ft(t){let e,n=Object.entries(t[0]),r=[];for(let e=0;e<n.length;e+=1)r[e]=dt(at(t,n,e));return{c(){e=b("div");for(let t=0;t<r.length;t+=1)r[t].c();E(e,"class","selector svelte-yd846j")},m(t,n){h(t,e,n);for(let t=0;t<r.length;t+=1)r[t].m(e,null)},p(t,o){if(3&o){let s;for(n=Object.entries(t[0]),s=0;s<n.length;s+=1){const c=at(t,n,s);r[s]?r[s].p(c,o):(r[s]=dt(c),r[s].c(),r[s].m(e,null))}for(;s<r.length;s+=1)r[s].d(1);r.length=n.length}},d(t){t&&y(e),v(r,t)}}}function dt(t){let e,n,r,o,s,c=t[3]+"";function l(){return t[2](t[4])}return{c(){e=b("div"),n=w(c),E(e,"class",r="view "+(t[4]===t[1]&&"active")+" svelte-yd846j")},m(t,r){h(t,e,r),g(e,n),o||(s=k(e,"click",l),o=!0)},p(o,s){t=o,1&s&&c!==(c=t[3]+"")&&C(n,c),3&s&&r!==(r="view "+(t[4]===t[1]&&"active")+" svelte-yd846j")&&E(e,"class",r)},d(t){t&&y(e),o=!1,s()}}}function $t(t){let e,n,r,o,s,c=t[0]&&ft(t);var l=t[1];return l&&(o=new l({})),{c(){e=b("div"),c&&c.c(),n=x(),r=b("div"),o&&st(o.$$.fragment),E(r,"class","slot svelte-yd846j"),E(e,"class","container svelte-yd846j")},m(t,l){h(t,e,l),c&&c.m(e,null),g(e,n),g(e,r),o&&ct(o,r,null),s=!0},p(t,[s]){if(t[0]?c?c.p(t,s):(c=ft(t),c.c(),c.m(e,n)):c&&(c.d(1),c=null),l!==(l=t[1])){if(o){Z();const t=o;nt(t.$$.fragment,1,0,(()=>{lt(t,1)})),tt()}l?(o=new l({}),st(o.$$.fragment),et(o.$$.fragment,1),ct(o,r,null)):o=null}},i(t){s||(o&&et(o.$$.fragment,t),s=!0)},o(t){o&&nt(o.$$.fragment,t),s=!1},d(t){t&&y(e),c&&c.d(),o&&lt(o)}}}function pt(t,e,n){let{views:r}=e,o=r[Object.keys(r)[0]];return t.$$set=t=>{"views"in t&&n(0,r=t.views)},[r,o,t=>n(1,o=t)]}class mt extends ut{constructor(t){super(),it(this,t,pt,$t,c,{views:0})}}function gt(t){let e;return{c(){e=b("div"),e.textContent="Establishing connection with the server...",E(e,"class","loader svelte-1epnqhq")},m(t,n){h(t,e,n)},d(t){t&&y(e)}}}function ht(e){let n,r,o,s=e[0]&&gt();return{c(){n=b("div"),r=b("div"),r.textContent="OpenBar",o=x(),s&&s.c(),E(r,"class","title svelte-1epnqhq"),E(n,"class","topbar svelte-1epnqhq")},m(t,c){h(t,n,c),g(n,r),g(n,o),s&&s.m(n,null),e[2](n)},p(t,[e]){t[0]?s||(s=gt(),s.c(),s.m(n,null)):s&&(s.d(1),s=null)},i:t,o:t,d(t){t&&y(n),s&&s.d(),e[2](null)}}}function yt(t,e,n){let r,{loading:o=!1}=e;async function s(){await M(),n(1,r.style.height="10vh",r),n(1,r.style.lineHeight="10vh",r),n(1,r.style.zIndex="0",r),n(1,r.style.fontSize="xx-large",r)}return t.$$set=t=>{"loading"in t&&n(0,o=t.loading)},t.$$.update=()=>{1&t.$$.dirty&&(o?async function(){await M(),n(1,r.style.height="100vh",r),n(1,r.style.lineHeight="100vh",r),n(1,r.style.zIndex="100",r),n(1,r.style.fontSize="10vw",r)}():setTimeout(s,1e3))},[o,r,function(t){B[t?"unshift":"push"]((()=>{r=t,n(1,r)}))}]}class vt extends ut{constructor(t){super(),it(this,t,yt,ht,c,{loading:0})}}function bt(t,{delay:n=0,duration:r=400,easing:o=e}){const s=+getComputedStyle(t).opacity;return{delay:n,duration:r,easing:o,css:t=>"opacity: "+t*s}}function wt(e){let n,r,s,c,l,i,u,a,f,d,$,p;return{c(){n=b("div"),r=b("div"),s=b("label"),s.textContent="Name :",c=x(),l=b("input"),i=x(),u=b("button"),a=w("Ok"),E(s,"for","name"),E(s,"class","svelte-105vy4t"),E(l,"type","text"),E(l,"id","name"),E(l,"maxlength","15"),E(l,"class","svelte-105vy4t"),u.disabled=f=!(e[1].length>2),E(r,"class","container svelte-105vy4t"),E(n,"class","background svelte-105vy4t")},m(t,o){var f;h(t,n,o),g(n,r),g(r,s),g(r,c),g(r,l),S(l,e[1]),g(r,i),g(r,u),g(u,a),$||(p=[k(l,"input",e[4]),k(u,"click",e[5]),k(r,"click",(f=e[3],function(t){return t.stopPropagation(),f.call(this,t)})),k(n,"click",e[6])],$=!0)},p(t,e){2&e&&l.value!==t[1]&&S(l,t[1]),2&e&&f!==(f=!(t[1].length>2))&&(u.disabled=f)},i(t){d||J((()=>{d=ot(n,bt,{}),d.start()}))},o:t,d(t){t&&y(n),$=!1,o(p)}}}function xt(e){let n,r=e[0]&&wt(e);return{c(){r&&r.c(),n=_()},m(t,e){r&&r.m(t,e),h(t,n,e)},p(t,[e]){t[0]?r?(r.p(t,e),1&e&&et(r,1)):(r=wt(t),r.c(),et(r,1),r.m(n.parentNode,n)):r&&(r.d(1),r=null)},i(t){et(r)},o:t,d(t){r&&r.d(t),t&&y(n)}}}function _t(t,e,n){let{show:r=!1}=e,o="";const s=N();return t.$$set=t=>{"show"in t&&n(0,r=t.show)},t.$$.update=()=>{1&t.$$.dirty&&(r||n(1,o=""))},[r,o,s,function(e){F(t,e)},function(){o=this.value,n(1,o),n(0,r)},()=>s("confirm",o),()=>s("cancel")]}class kt extends ut{constructor(t){super(),it(this,t,_t,xt,c,{show:0})}}const Et=[];function Ct(e,n=t){let r;const o=[];function s(t){if(c(e,t)&&(e=t,r)){const t=!Et.length;for(let t=0;t<o.length;t+=1){const n=o[t];n[1](),Et.push(n,e)}if(t){for(let t=0;t<Et.length;t+=2)Et[t][0](Et[t+1]);Et.length=0}}}return{set:s,update:function(t){s(t(e))},subscribe:function(c,l=t){const i=[c,l];return o.push(i),1===o.length&&(r=n(s)||t),c(e),()=>{const t=o.indexOf(i);-1!==t&&o.splice(t,1),0===o.length&&(r(),r=null)}}}}const St=Ct(!1);var Dt=function(){const t=window.location.href.replace("http","ws"),{subscribe:e,set:n,update:r}=Ct(new WebSocket(`${t}ws`));let o;return e((e=>{o=e,o.onclose=()=>{console.warn("Connection with server lost. Reconnecting..."),St.set(!1),n(new WebSocket(`${t}ws`))},o.onerror=()=>{St.set(!1),o.close()},o.onopen=()=>{console.log("Connection with server established."),St.set(!0)}})),{subscribe:e,set:n,update:r,send:t=>o.readyState&&o.send(JSON.stringify(t))}}();const Ot=Ct({price:void 0,users:void 0,history:void 0});Dt.subscribe((t=>{t.onmessage=t=>{const e=JSON.parse(t.data);switch(e.type){case"allData":Ot.set(e.all);break;case"newUser":Ot.update((t=>(t.users=[...t.users??[],e.user],t)));break;case"updatePrice":Ot.update((t=>(t.price=e.price,t)));break;case"updateDebt":n=e,Ot.update((({price:t,users:e,history:r})=>{let o;if(e.map((t=>o=t.id===n.id?n.debt-t.debt:o)),!o)return{price:t,users:e,history:r};if(r?.length>0){const[s]=r.slice(-1),c=new Date(s.date),l=new Date(c.getTime()+12e4),i=new Date,u=i<=l&&i>=c;if(s.targetId===n.id&&u)return s.numberOfBars+=o,0===s.numberOfBars&&r.pop(),{price:t,users:e,history:r}}return r.push({date:Date.now(),targetId:n.id,numberOfBars:o}),{price:t,users:e,history:r}})),function(t){Ot.update((e=>(e.users?.map((e=>{e.id===t.id&&(e.debt=t.debt)})),e)))}(e)}var n}}));var jt={subscribe:Ot.subscribe,set:Ot.set,addParticipant:t=>Dt.send({type:"newUser",name:t}),updatePrice:t=>Dt.send({type:"updatePrice",price:t}),updateDebt:(t,e)=>Dt.send({type:"updateDebt",id:t,debt:e})};function qt(t){let e,n,r,o,s,c;return r=new kt({props:{show:t[0]}}),r.$on("confirm",t[1]),r.$on("cancel",t[3]),{c(){e=b("div"),e.textContent="+",n=x(),st(r.$$.fragment),E(e,"class","add-btn svelte-ogyphw")},m(l,i){h(l,e,i),h(l,n,i),ct(r,l,i),o=!0,s||(c=k(e,"click",t[2]),s=!0)},p(t,[e]){const n={};1&e&&(n.show=t[0]),r.$set(n)},i(t){o||(et(r.$$.fragment,t),o=!0)},o(t){nt(r.$$.fragment,t),o=!1},d(t){t&&y(e),t&&y(n),lt(r,t),s=!1,c()}}}function Pt(t,e,n){let r=!1;return[r,function(t){jt.addParticipant(t.detail),n(0,r=!1)},()=>n(0,r=!0),()=>n(0,r=!1)]}class It extends ut{constructor(t){super(),it(this,t,Pt,qt,c,{})}}function Nt(t){let e;function n(){e=Date.now()}return t.addEventListener("pointerdown",n),t.addEventListener("pointerup",(function(){Date.now()-e>400?t.dispatchEvent(new CustomEvent("longclick")):t.dispatchEvent(new CustomEvent("shortclick"))})),{destroy(){t.removeEventListener("pointerdown",n),t.removeEventListener("pointerup",n)}}}const Ft=t=>({}),zt=t=>({}),Bt=t=>({}),Lt=t=>({});function At(e){let n,r,c,l,u,f,d;const $=e[1].title,p=i($,e,e[0],Lt),m=e[1].body,v=i(m,e,e[0],zt);return{c(){n=b("div"),r=b("div"),p&&p.c(),c=x(),l=b("div"),v&&v.c(),E(r,"class","title svelte-qqiok7"),E(l,"class","body svelte-qqiok7"),E(n,"class","card svelte-qqiok7")},m(o,i){var a;h(o,n,i),g(n,r),p&&p.m(r,null),g(n,c),g(n,l),v&&v.m(l,null),u=!0,f||(d=[(a=Nt.call(null,n),a&&s(a.destroy)?a.destroy:t),k(n,"longclick",e[2]),k(n,"shortclick",e[3])],f=!0)},p(t,[e]){p&&p.p&&1&e&&a(p,$,t,t[0],e,Bt,Lt),v&&v.p&&1&e&&a(v,m,t,t[0],e,Ft,zt)},i(t){u||(et(p,t),et(v,t),u=!0)},o(t){nt(p,t),nt(v,t),u=!1},d(t){t&&y(n),p&&p.d(t),v&&v.d(t),f=!1,o(d)}}}function Rt(t,e,n){let{$$slots:r={},$$scope:o}=e;return t.$$set=t=>{"$$scope"in t&&n(0,o=t.$$scope)},[o,r,function(e){F(t,e)},function(e){F(t,e)}]}class Ht extends ut{constructor(t){super(),it(this,t,Rt,At,c,{})}}function Tt(t,e,n){const r=t.slice();return r[3]=e[n].id,r[4]=e[n].name,r[5]=e[n].debt,r}function Mt(t,e,n){const r=t.slice();return r[8]=e[n],r}function Jt(t){let e,n,r,o,s,c=t[4]+"",l=(t[5]*t[0].price).toFixed(2)+"";return{c(){e=b("span"),n=w(c),r=w(" ("),o=w(l),s=w("€)"),E(e,"slot","title")},m(t,c){h(t,e,c),g(e,n),g(e,r),g(e,o),g(e,s)},p(t,e){1&e&&c!==(c=t[4]+"")&&C(n,c),1&e&&l!==(l=(t[5]*t[0].price).toFixed(2)+"")&&C(o,l)},d(t){t&&y(e)}}}function Ut(t){let e;return{c(){e=b("span"),e.textContent="IIII",E(e,"class","tally-marks svelte-1no6nh5")},m(t,n){h(t,e,n)},d(t){t&&y(e)}}}function Wt(t){let e,n,r,o,s="I".repeat(t[5]%5)+"",c=Array((t[5]-t[5]%5)/5),l=[];for(let e=0;e<c.length;e+=1)l[e]=Ut(Mt(t,c,e));return{c(){e=b("span");for(let t=0;t<l.length;t+=1)l[t].c();n=x(),r=b("span"),o=w(s),E(e,"slot","body")},m(t,s){h(t,e,s);for(let t=0;t<l.length;t+=1)l[t].m(e,null);g(e,n),g(e,r),g(r,o)},p(t,r){if(1&r){const r=c.length;let o;for(c=Array((t[5]-t[5]%5)/5),o=r;o<c.length;o+=1){Mt(t,c,o);l[o]||(l[o]=Ut(),l[o].c(),l[o].m(e,n))}for(o=c.length;o<r;o+=1)l[o].d(1);l.length=c.length}1&r&&s!==(s="I".repeat(t[5]%5)+"")&&C(o,s)},d(t){t&&y(e),v(l,t)}}}function Gt(e){let n,r;return{c(){n=x(),r=x()},m(t,e){h(t,n,e),h(t,r,e)},p:t,d(t){t&&y(n),t&&y(r)}}}function Kt(t){let e,n;return e=new Ht({props:{$$slots:{default:[Gt],body:[Wt],title:[Jt]},$$scope:{ctx:t}}}),e.$on("shortclick",(function(){return t[1](t[3],t[5])})),e.$on("longclick",(function(){return t[2](t[5],t[3])})),{c(){st(e.$$.fragment)},m(t,r){ct(e,t,r),n=!0},p(n,r){t=n;const o={};2049&r&&(o.$$scope={dirty:r,ctx:t}),e.$set(o)},i(t){n||(et(e.$$.fragment,t),n=!0)},o(t){nt(e.$$.fragment,t),n=!1},d(t){lt(e,t)}}}function Qt(t){let e,n,r=t[0].users??[],o=[];for(let e=0;e<r.length;e+=1)o[e]=Kt(Tt(t,r,e));const s=t=>nt(o[t],1,1,(()=>{o[t]=null}));return{c(){for(let t=0;t<o.length;t+=1)o[t].c();e=_()},m(t,r){for(let e=0;e<o.length;e+=1)o[e].m(t,r);h(t,e,r),n=!0},p(t,[n]){if(1&n){let c;for(r=t[0].users??[],c=0;c<r.length;c+=1){const s=Tt(t,r,c);o[c]?(o[c].p(s,n),et(o[c],1)):(o[c]=Kt(s),o[c].c(),et(o[c],1),o[c].m(e.parentNode,e))}for(Z(),c=r.length;c<o.length;c+=1)s(c);tt()}},i(t){if(!n){for(let t=0;t<r.length;t+=1)et(o[t]);n=!0}},o(t){o=o.filter(Boolean);for(let t=0;t<o.length;t+=1)nt(o[t]);n=!1},d(t){v(o,t),t&&y(e)}}}function Vt(t,e,n){let r;l(t,jt,(t=>n(0,r=t)));return[r,(t,e)=>jt.updateDebt(t,e+1),(t,e)=>t>0&&jt.updateDebt(e,t-1)]}class Xt extends ut{constructor(t){super(),it(this,t,Vt,Qt,c,{})}}const Yt=t=>({}),Zt=t=>({}),te=t=>({}),ee=t=>({});function ne(t){let e,n,r,o,s;const c=t[1].title,l=i(c,t,t[0],ee),u=t[1].body,f=i(u,t,t[0],Zt);return{c(){e=b("div"),n=b("div"),l&&l.c(),r=x(),o=b("div"),f&&f.c(),E(n,"class","title svelte-vg6tt1"),E(o,"class","body svelte-vg6tt1"),E(e,"class","container svelte-vg6tt1")},m(t,c){h(t,e,c),g(e,n),l&&l.m(n,null),g(e,r),g(e,o),f&&f.m(o,null),s=!0},p(t,[e]){l&&l.p&&1&e&&a(l,c,t,t[0],e,te,ee),f&&f.p&&1&e&&a(f,u,t,t[0],e,Yt,Zt)},i(t){s||(et(l,t),et(f,t),s=!0)},o(t){nt(l,t),nt(f,t),s=!1},d(t){t&&y(e),l&&l.d(t),f&&f.d(t)}}}function re(t,e,n){let{$$slots:r={},$$scope:o}=e;return t.$$set=t=>{"$$scope"in t&&n(0,o=t.$$scope)},[o,r]}class oe extends ut{constructor(t){super(),it(this,t,re,ne,c,{})}}function se(t){let e;return{c(){e=b("span"),e.textContent="People",E(e,"slot","title")},m(t,n){h(t,e,n)},d(t){t&&y(e)}}}function ce(t){let e;return{c(){e=w("Start by adding someone first !")},m(t,n){h(t,e,n)},d(t){t&&y(e)}}}function le(t){let e;return{c(){e=w("Press on the desired participant to add a bar, or long press to remove one")},m(t,n){h(t,e,n)},d(t){t&&y(e)}}}function ie(t){let e;function n(t,e){return t[0].users?.length?le:ce}let r=n(t),o=r(t);return{c(){e=b("span"),o.c(),E(e,"slot","body")},m(t,n){h(t,e,n),o.m(e,null)},p(t,s){r!==(r=n(t))&&(o.d(1),o=r(t),o&&(o.c(),o.m(e,null)))},d(t){t&&y(e),o.d()}}}function ue(e){let n;return{c(){n=x()},m(t,e){h(t,n,e)},p:t,d(t){t&&y(n)}}}function ae(t){let e,n;return e=new oe({props:{$$slots:{default:[ue],body:[ie],title:[se]},$$scope:{ctx:t}}}),{c(){st(e.$$.fragment)},m(t,r){ct(e,t,r),n=!0},p(t,[n]){const r={};3&n&&(r.$$scope={dirty:n,ctx:t}),e.$set(r)},i(t){n||(et(e.$$.fragment,t),n=!0)},o(t){nt(e.$$.fragment,t),n=!1},d(t){lt(e,t)}}}function fe(t,e,n){let r;return l(t,jt,(t=>n(0,r=t))),[r]}class de extends ut{constructor(t){super(),it(this,t,fe,ae,c,{})}}function $e(t){let e,n;const r=t[1].default,o=i(r,t,t[0],null);return{c(){e=b("div"),o&&o.c(),E(e,"class","container svelte-ijtiry")},m(t,r){h(t,e,r),o&&o.m(e,null),n=!0},p(t,[e]){o&&o.p&&1&e&&a(o,r,t,t[0],e,null,null)},i(t){n||(et(o,t),n=!0)},o(t){nt(o,t),n=!1},d(t){t&&y(e),o&&o.d(t)}}}function pe(t,e,n){let{$$slots:r={},$$scope:o}=e;return t.$$set=t=>{"$$scope"in t&&n(0,o=t.$$scope)},[o,r]}class me extends ut{constructor(t){super(),it(this,t,pe,$e,c,{})}}function ge(t){let e,n,r,o;return e=new de({}),r=new Xt({}),{c(){st(e.$$.fragment),n=x(),st(r.$$.fragment)},m(t,s){ct(e,t,s),h(t,n,s),ct(r,t,s),o=!0},i(t){o||(et(e.$$.fragment,t),et(r.$$.fragment,t),o=!0)},o(t){nt(e.$$.fragment,t),nt(r.$$.fragment,t),o=!1},d(t){lt(e,t),t&&y(n),lt(r,t)}}}function he(t){let e,n,r,o;return e=new me({props:{$$slots:{default:[ge]},$$scope:{ctx:t}}}),r=new It({}),{c(){st(e.$$.fragment),n=x(),st(r.$$.fragment)},m(t,s){ct(e,t,s),h(t,n,s),ct(r,t,s),o=!0},p(t,[n]){const r={};1&n&&(r.$$scope={dirty:n,ctx:t}),e.$set(r)},i(t){o||(et(e.$$.fragment,t),et(r.$$.fragment,t),o=!0)},o(t){nt(e.$$.fragment,t),nt(r.$$.fragment,t),o=!1},d(t){lt(e,t),t&&y(n),lt(r,t)}}}class ye extends ut{constructor(t){super(),it(this,t,null,he,c,{})}}function ve(t,e,n){const r=t.slice();return r[2]=e[n].id,r[3]=e[n].name,r[4]=e[n].debt,r}function be(t){let e;return{c(){e=b("span"),e.textContent="Mark a debt as paid",E(e,"slot","title")},m(t,n){h(t,e,n)},d(t){t&&y(e)}}}function we(t){let e;return{c(){e=w("Start by adding someone first !")},m(t,n){h(t,e,n)},d(t){t&&y(e)}}}function xe(t){let e;return{c(){e=w("Long click on the concerned participant")},m(t,n){h(t,e,n)},d(t){t&&y(e)}}}function _e(t){let e;function n(t,e){return t[0].users?.length?xe:we}let r=n(t),o=r(t);return{c(){e=b("span"),o.c(),E(e,"slot","body")},m(t,n){h(t,e,n),o.m(e,null)},p(t,s){r!==(r=n(t))&&(o.d(1),o=r(t),o&&(o.c(),o.m(e,null)))},d(t){t&&y(e),o.d()}}}function ke(e){let n;return{c(){n=x()},m(t,e){h(t,n,e)},p:t,d(t){t&&y(n)}}}function Ee(t){let e,n,r=t[3]+"";return{c(){e=b("span"),n=w(r),E(e,"slot","title")},m(t,r){h(t,e,r),g(e,n)},p(t,e){1&e&&r!==(r=t[3]+"")&&C(n,r)},d(t){t&&y(e)}}}function Ce(t){let e,n,r,o=(t[4]*t[0].price).toFixed(2)+"";return{c(){e=b("span"),n=w(o),r=w("€"),E(e,"slot","body")},m(t,o){h(t,e,o),g(e,n),g(e,r)},p(t,e){1&e&&o!==(o=(t[4]*t[0].price).toFixed(2)+"")&&C(n,o)},d(t){t&&y(e)}}}function Se(e){let n,r;return{c(){n=x(),r=x()},m(t,e){h(t,n,e),h(t,r,e)},p:t,d(t){t&&y(n),t&&y(r)}}}function De(t){let e,n;return e=new Ht({props:{$$slots:{default:[Se],body:[Ce],title:[Ee]},$$scope:{ctx:t}}}),e.$on("longclick",(function(){return t[1](t[2])})),{c(){st(e.$$.fragment)},m(t,r){ct(e,t,r),n=!0},p(n,r){t=n;const o={};129&r&&(o.$$scope={dirty:r,ctx:t}),e.$set(o)},i(t){n||(et(e.$$.fragment,t),n=!0)},o(t){nt(e.$$.fragment,t),n=!1},d(t){lt(e,t)}}}function Oe(t){let e,n,r,o;e=new oe({props:{$$slots:{default:[ke],body:[_e],title:[be]},$$scope:{ctx:t}}});let s=t[0].users??[],c=[];for(let e=0;e<s.length;e+=1)c[e]=De(ve(t,s,e));const l=t=>nt(c[t],1,1,(()=>{c[t]=null}));return{c(){st(e.$$.fragment),n=x();for(let t=0;t<c.length;t+=1)c[t].c();r=_()},m(t,s){ct(e,t,s),h(t,n,s);for(let e=0;e<c.length;e+=1)c[e].m(t,s);h(t,r,s),o=!0},p(t,[n]){const o={};if(129&n&&(o.$$scope={dirty:n,ctx:t}),e.$set(o),1&n){let e;for(s=t[0].users??[],e=0;e<s.length;e+=1){const o=ve(t,s,e);c[e]?(c[e].p(o,n),et(c[e],1)):(c[e]=De(o),c[e].c(),et(c[e],1),c[e].m(r.parentNode,r))}for(Z(),e=s.length;e<c.length;e+=1)l(e);tt()}},i(t){if(!o){et(e.$$.fragment,t);for(let t=0;t<s.length;t+=1)et(c[t]);o=!0}},o(t){nt(e.$$.fragment,t),c=c.filter(Boolean);for(let t=0;t<c.length;t+=1)nt(c[t]);o=!1},d(t){lt(e,t),t&&y(n),v(c,t),t&&y(r)}}}function je(t,e,n){let r;l(t,jt,(t=>n(0,r=t)));return[r,t=>jt.updateDebt(t,0)]}class qe extends ut{constructor(t){super(),it(this,t,je,Oe,c,{})}}function Pe(t){let e;return{c(){e=b("span"),e.textContent="Settings",E(e,"slot","title")},m(t,n){h(t,e,n)},d(t){t&&y(e)}}}function Ie(t){let e;return{c(){e=b("span"),e.textContent="Price",E(e,"slot","title")},m(t,n){h(t,e,n)},d(t){t&&y(e)}}}function Ne(t){let e,n,r,s,c,l,i,u,a=t[0].price.toFixed(2)+"";return{c(){e=b("span"),n=b("button"),n.textContent="-",r=x(),s=w(a),c=w("€\r\n    "),l=b("button"),l.textContent="+",E(n,"class","svelte-8076y7"),E(l,"class","svelte-8076y7"),E(e,"slot","body")},m(o,a){h(o,e,a),g(e,n),g(e,r),g(e,s),g(e,c),g(e,l),i||(u=[k(n,"click",t[2]),k(l,"click",t[3])],i=!0)},p(t,e){1&e&&a!==(a=t[0].price.toFixed(2)+"")&&C(s,a)},d(t){t&&y(e),i=!1,o(u)}}}function Fe(e){let n;return{c(){n=x()},m(t,e){h(t,n,e)},p:t,d(t){t&&y(n)}}}function ze(t){let e,n,r,o;return e=new oe({props:{$$slots:{title:[Pe]},$$scope:{ctx:t}}}),r=new Ht({props:{$$slots:{default:[Fe],body:[Ne],title:[Ie]},$$scope:{ctx:t}}}),{c(){st(e.$$.fragment),n=x(),st(r.$$.fragment)},m(t,s){ct(e,t,s),h(t,n,s),ct(r,t,s),o=!0},p(t,[n]){const o={};16&n&&(o.$$scope={dirty:n,ctx:t}),e.$set(o);const s={};17&n&&(s.$$scope={dirty:n,ctx:t}),r.$set(s)},i(t){o||(et(e.$$.fragment,t),et(r.$$.fragment,t),o=!0)},o(t){nt(e.$$.fragment,t),nt(r.$$.fragment,t),o=!1},d(t){lt(e,t),t&&y(n),lt(r,t)}}}function Be(t,e,n){let r;function o(t){jt.updatePrice(parseFloat((r.price+t).toFixed(2)))}l(t,jt,(t=>n(0,r=t)));return[r,o,()=>o(-.01),()=>o(.01)]}class Le extends ut{constructor(t){super(),it(this,t,Be,ze,c,{})}}function Ae(t){let e,n,r,o;return e=new Le({}),r=new qe({}),{c(){st(e.$$.fragment),n=x(),st(r.$$.fragment)},m(t,s){ct(e,t,s),h(t,n,s),ct(r,t,s),o=!0},i(t){o||(et(e.$$.fragment,t),et(r.$$.fragment,t),o=!0)},o(t){nt(e.$$.fragment,t),nt(r.$$.fragment,t),o=!1},d(t){lt(e,t),t&&y(n),lt(r,t)}}}function Re(t){let e,n;return e=new me({props:{$$slots:{default:[Ae]},$$scope:{ctx:t}}}),{c(){st(e.$$.fragment)},m(t,r){ct(e,t,r),n=!0},p(t,[n]){const r={};1&n&&(r.$$scope={dirty:n,ctx:t}),e.$set(r)},i(t){n||(et(e.$$.fragment,t),n=!0)},o(t){nt(e.$$.fragment,t),n=!1},d(t){lt(e,t)}}}class He extends ut{constructor(t){super(),it(this,t,null,Re,c,{})}}function Te(t,e,n){const r=t.slice();return r[1]=e[n].date,r[2]=e[n].targetId,r[3]=e[n].numberOfBars,r}function Me(t){let e,n,r=t[0].users[t[2]].name+"";return{c(){e=b("span"),n=w(r),E(e,"slot","title")},m(t,r){h(t,e,r),g(e,n)},p(t,e){1&e&&r!==(r=t[0].users[t[2]].name+"")&&C(n,r)},d(t){t&&y(e)}}}function Je(t){let e,n,r,o,s,c,l=new Date(t[1]).toLocaleString()+"",i=t[3]+"";return{c(){e=b("span"),n=b("p"),r=w(l),o=x(),s=b("p"),c=w(i),E(e,"class","card-body svelte-rpzjtz"),E(e,"slot","body")},m(t,l){h(t,e,l),g(e,n),g(n,r),g(e,o),g(e,s),g(s,c)},p(t,e){1&e&&l!==(l=new Date(t[1]).toLocaleString()+"")&&C(r,l),1&e&&i!==(i=t[3]+"")&&C(c,i)},d(t){t&&y(e)}}}function Ue(e){let n,r;return{c(){n=x(),r=x()},m(t,e){h(t,n,e),h(t,r,e)},p:t,d(t){t&&y(n),t&&y(r)}}}function We(t){let e,n;return e=new Ht({props:{$$slots:{default:[Ue],body:[Je],title:[Me]},$$scope:{ctx:t}}}),{c(){st(e.$$.fragment)},m(t,r){ct(e,t,r),n=!0},p(t,n){const r={};65&n&&(r.$$scope={dirty:n,ctx:t}),e.$set(r)},i(t){n||(et(e.$$.fragment,t),n=!0)},o(t){nt(e.$$.fragment,t),n=!1},d(t){lt(e,t)}}}function Ge(t){let e,n,r=t[0].history?.slice().reverse()??[],o=[];for(let e=0;e<r.length;e+=1)o[e]=We(Te(t,r,e));const s=t=>nt(o[t],1,1,(()=>{o[t]=null}));return{c(){for(let t=0;t<o.length;t+=1)o[t].c();e=_()},m(t,r){for(let e=0;e<o.length;e+=1)o[e].m(t,r);h(t,e,r),n=!0},p(t,[n]){if(1&n){let c;for(r=t[0].history?.slice().reverse()??[],c=0;c<r.length;c+=1){const s=Te(t,r,c);o[c]?(o[c].p(s,n),et(o[c],1)):(o[c]=We(s),o[c].c(),et(o[c],1),o[c].m(e.parentNode,e))}for(Z(),c=r.length;c<o.length;c+=1)s(c);tt()}},i(t){if(!n){for(let t=0;t<r.length;t+=1)et(o[t]);n=!0}},o(t){o=o.filter(Boolean);for(let t=0;t<o.length;t+=1)nt(o[t]);n=!1},d(t){v(o,t),t&&y(e)}}}function Ke(t,e,n){let r;return l(t,jt,(t=>n(0,r=t))),[r]}class Qe extends ut{constructor(t){super(),it(this,t,Ke,Ge,c,{})}}function Ve(t){let e;return{c(){e=b("span"),e.textContent="History",E(e,"slot","title")},m(t,n){h(t,e,n)},d(t){t&&y(e)}}}function Xe(t){let e;return{c(){e=w("Nothing to show here yet")},m(t,n){h(t,e,n)},d(t){t&&y(e)}}}function Ye(t){let e,n=!t[0].history?.length&&Xe();return{c(){e=b("span"),n&&n.c(),E(e,"slot","body")},m(t,r){h(t,e,r),n&&n.m(e,null)},p(t,r){t[0].history?.length?n&&(n.d(1),n=null):n||(n=Xe(),n.c(),n.m(e,null))},d(t){t&&y(e),n&&n.d()}}}function Ze(e){let n;return{c(){n=x()},m(t,e){h(t,n,e)},p:t,d(t){t&&y(n)}}}function tn(t){let e,n;return e=new oe({props:{$$slots:{default:[Ze],body:[Ye],title:[Ve]},$$scope:{ctx:t}}}),{c(){st(e.$$.fragment)},m(t,r){ct(e,t,r),n=!0},p(t,[n]){const r={};3&n&&(r.$$scope={dirty:n,ctx:t}),e.$set(r)},i(t){n||(et(e.$$.fragment,t),n=!0)},o(t){nt(e.$$.fragment,t),n=!1},d(t){lt(e,t)}}}function en(t,e,n){let r;return l(t,jt,(t=>n(0,r=t))),[r]}class nn extends ut{constructor(t){super(),it(this,t,en,tn,c,{})}}function rn(t){let e,n,r,o;return e=new nn({}),r=new Qe({}),{c(){st(e.$$.fragment),n=x(),st(r.$$.fragment)},m(t,s){ct(e,t,s),h(t,n,s),ct(r,t,s),o=!0},i(t){o||(et(e.$$.fragment,t),et(r.$$.fragment,t),o=!0)},o(t){nt(e.$$.fragment,t),nt(r.$$.fragment,t),o=!1},d(t){lt(e,t),t&&y(n),lt(r,t)}}}function on(t){let e,n;return e=new me({props:{$$slots:{default:[rn]},$$scope:{ctx:t}}}),{c(){st(e.$$.fragment)},m(t,r){ct(e,t,r),n=!0},p(t,[n]){const r={};1&n&&(r.$$scope={dirty:n,ctx:t}),e.$set(r)},i(t){n||(et(e.$$.fragment,t),n=!0)},o(t){nt(e.$$.fragment,t),n=!1},d(t){lt(e,t)}}}class sn extends ut{constructor(t){super(),it(this,t,null,on,c,{})}}function cn(t){let e,n,r,o,s;return n=new vt({props:{loading:!t[0]}}),o=new mt({props:{views:{People:ye,History:sn,Settings:He}}}),{c(){e=b("main"),st(n.$$.fragment),r=x(),st(o.$$.fragment),E(e,"class","svelte-u30ojs")},m(t,c){h(t,e,c),ct(n,e,null),g(e,r),ct(o,e,null),s=!0},p(t,[e]){const r={};1&e&&(r.loading=!t[0]),n.$set(r)},i(t){s||(et(n.$$.fragment,t),et(o.$$.fragment,t),s=!0)},o(t){nt(n.$$.fragment,t),nt(o.$$.fragment,t),s=!1},d(t){t&&y(e),lt(n),lt(o)}}}function ln(t,e,n){let r;return l(t,St,(t=>n(0,r=t))),[r]}return new class extends ut{constructor(t){super(),it(this,t,ln,cn,c,{})}}({target:document.body})}();
//# sourceMappingURL=bundle.js.map
